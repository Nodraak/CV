%
% Packages
%

\usepackage[pscoord]{eso-pic}   % \placetextbox
\usepackage{siunitx}            % micro
\usepackage{enumitem}           % configure lists
\usepackage{lastpage}

\PassOptionsToPackage{colorlinks, urlcolor=blue, linkcolor=gray}{hyperref}

%
% Font
%

\usepackage{mathpazo}  % Palatino font
% \usepackage{kpfonts}
% \usepackage{fontspec} \setmainfont{Corbel}

%
% Moderncv
%

\moderncvstyle{classic}
\moderncvcolor{blue} % color1=blue color2=gray

%
% Helpers
%

\newcommand{\nodSection}[1]{\setlength{\hintscolumnwidth}{50mm}\vspace{-5pt}\section{#1}}
\newcommand{\nodItem}[1]{\item[\color{color1}$\bullet$] #1}

% mycvxp: company, date, location, title, missions/results/skills
\newcommand{\nodCvItem}[5]{
    \textbf{#4} \newline{}                      % title
    \cvitem{
        \begin{minipage}[t]{\linewidth}
            \raggedright
            \vspace{-5pt}
            \textsc{#1} \newline{}              % company
            #2 \newline{}                       % date
            \textit{#3}                         % location
        \end{minipage}
    }{
        \begin{minipage}[t]{\linewidth}
            \vspace{-5pt}
            \begin{itemize}[topsep=0pt,itemsep=0pt,parsep=0pt]
                #5                              % missions/results/skills
            \end{itemize}
        \end{minipage}
        \vspace{5pt}
    }
}

% for showing the version
\newcommand{\nodPlaceBox}[3]{% \placetextbox{<horizontal pos>}{<vertical pos>}{<stuff>}
  \AddToShipoutPictureFG{% Add <stuff> to all page foreground
    \put(%
        \LenToUnit{#1\paperwidth},\LenToUnit{#2\paperheight}%
    ){%
        \vtop{{\null}\makebox[0pt][c]{#3}}%
    }%
  }%
}%

%
% Personal data
%

\firstname{Adrien}
\familyname{\textsc{Chardon}}

%
% Cv title
%

% manually reimplemented, heavily copied from moderncv
\makeatletter
\renewcommand{\makecvtitle}{
    % prepare phone
    \def\phonesdetails{}%
        \collectionloop{phones}{% the key holds the phone type (=symbol command prefix), the item holds the number
            \protected@edef\phonesdetails{\phonesdetails\protect\makenewline\csname\collectionloopkey phonesymbol\endcsname\collectionloopitem}}%
    % name
    \begin{minipage}[t]{.7\textwidth}
        \raggedright
        \namefont {\color{color0!60}\@firstname} {\color{color0!80}\@lastname}
        \vspace{7mm}
    \end{minipage}
    % contact info
    \begin{minipage}[t]{.3\textwidth}
        \raggedleft
        \addressfont\color{color2}
        \phonesdetails ~\\
        \emailsymbol\emaillink{\@email} \\
        \homepagesymbol\httplink{\@homepage}
    \end{minipage}
    % rule
    {\color{color2!50}\rule{\textwidth}{.25ex}}
    \\[0.10em]
    % title/quote
    \titlestyle{\@title}
}
\makeatother
