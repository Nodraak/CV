%
% Packages
%

\usepackage[pscoord]{eso-pic}   % \placetextbox
\usepackage{siunitx}            % micro
\usepackage{enumitem}           % configure lists

%
% Font
%

\usepackage{mathpazo}  % Palatino font
% \usepackage{kpfonts}
% \usepackage{fontspec} \setmainfont{Corbel}

%
% Moderncv
%

\moderncvstyle{classic}
\moderncvcolor{blue} % color1=blue color2=gray
\nopagenumbers{}

%
% Helpers
%

\newcommand{\nodSection}[1]{\setlength{\hintscolumnwidth}{50mm}\section{#1}}

\newcommand{\nodItemMission}[1]{\item[\color{color1}$\bullet$] #1}
\newcommand{\nodItemSkill}[1]{\item[\color{color1}$\circ$] \textit{#1}}

% mycvxp: company, date, location, title, missions/results/skills
\newcommand{\nodCvItem}[5]{
    \cvitem{
        \begin{minipage}[t]{\linewidth}
            \raggedright
            \textsc{#1} \newline{}              % company
            #2 \newline{}                       % date
            \textit{#3}                         % location
        \end{minipage}
    }{
        \begin{minipage}[t]{\linewidth}
            \textbf{#4}                         % title
            \begin{itemize}[topsep=0pt,itemsep=0pt,parsep=0pt]
                #5                              % missions/results/skills
            \end{itemize}
        \end{minipage}
        \vspace{0pt}
    }
}

% for showing the version
\newcommand{\nodPlaceBox}[3]{% \placetextbox{<horizontal pos>}{<vertical pos>}{<stuff>}
  \setbox0=\hbox{#3}% Put <stuff> in a box
  \AddToShipoutPictureFG*{% Add <stuff> to current page foreground
    \put(
        \LenToUnit{#1\paperwidth},\LenToUnit{#2\paperheight}
    ){
        \vtop{{\null}\makebox[0pt][c]{#3}}
    }%
  }%
}%

%
% Personal data
%

\firstname{Adrien}
\familyname{\textsc{Chardon}}

%
% Cv title
%

% manually reimplemented, heavily copied from moderncv
\makeatletter
\renewcommand{\makecvtitle}{
    % prepare phone
    \def\phonesdetails{}%
        \collectionloop{phones}{% the key holds the phone type (=symbol command prefix), the item holds the number
            \protected@edef\phonesdetails{\phonesdetails\protect\makenewline\csname\collectionloopkey phonesymbol\endcsname\collectionloopitem}}%
    % name
    \begin{minipage}[t]{.7\textwidth}
        \raggedright
        \namefont {\color{color0!60}\@firstname} {\color{color0!80}\@lastname}
        \vspace{5mm}
    \end{minipage}
    % contact info
    \begin{minipage}[t]{.3\textwidth}
        \raggedleft
        \addressfont\color{color2}
        \phonesdetails ~\\
        \emailsymbol\emaillink{\@email} \\
        \homepagesymbol\httplink{\@homepage}
    \end{minipage}
    % rule
    {\color{color2!50}\rule{\textwidth}{.25ex}}
    \\[0.10em]
    % title/quote
    \titlestyle{\@title}
}
\makeatother
